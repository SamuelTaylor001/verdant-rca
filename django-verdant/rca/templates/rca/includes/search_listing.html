{% load rca_tags wagtailcore_tags wagtailimages_tags static %}

{% if search_results %}
    <ul>
        {% for result in search_results %}
            {% with result_specific=result.specific %}
                <li class="row">
                    {% pageurl result_specific as result_specific_url %}
                    <a href="{{ result_specific.search_url|default:result_specific_url }}">
                        <div class="image">
                            {% if result_specific.feed_image %}
                                {% image result_specific.feed_image fill-180x160 %}
                            {% else %}
                                {% with carousel_item=result_specific.carousel_items.all|first %}
                                    {% if carousel_item.image %}
                                        {% image carousel_item.image fill-180x160 %}
                                    {% else %}
                                        <img src="{% static 'rca/images/rca-placeholder-square.jpg' %}" width="180">
                                    {% endif %}
                                {% endwith %}
                            {% endif %}
                        </div>
                        <div class="content">
                            <h4 class="h6">{{ result_specific }}</h4>

                            {% if result_specific.search_name %}
                                <div class="a2">{{ result_specific.search_name }}</div>
                            {% endif %}

                            {{ result_specific.search_description }}
                        </div>
                    </a>
                </li>
            {% endwith %}
        {% endfor %}
    </ul>

    {% if search_results.has_previous or search_results.has_next %}
        <ul class="row pagination">
            {% if search_results.has_previous %}
                <li class="prev"><a href="?q={{ query_string }}&amp;p={{ search_results.previous_page_number }}">Previous</a></li>
            {% endif %}
            {% if search_results.has_next %}
                <li class="next"><a href="?q={{ query_string }}&amp;p={{ search_results.next_page_number }}">Next</a></li>
            {% endif %}
        </ul>
    {% endif %}
{% endif %}