{% extends "rca/base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}type-standard{% endblock %}

{% block extra_js_head %}
    <script type="text/javascript" src="//player.wowza.com/player/latest/wowzaplayer.min.js"></script>
{% endblock %}

{% block content %}
    <h1 class="h1">{{ self.title }}</h1>

    <section class="row">
        {% if self.video_source_url %}
            <div id='wowza_player'></div>

            <script type="text/javascript">
                WowzaPlayer.create('playerElement',
                    {
                    "license":"PLAY1-djfjW-Gm9MG-Fw64x-dGQ6x-eVmkW",
                    "title":"{{ self.title|escapejs }}",
                    "description":"",
                    "sourceURL":"https://wowzaprod192-i.akamaihd.net/hls/live/766214/bc46a873/playlist.m3u8",
                    "autoPlay":true,
                    "volume":"75",
                    "mute":false,
                    "loop":false,
                    "audioOnly":false,
                    "uiShowQuickRewind":true,
                    {% if self.poster_image %}
                        {% image self.poster_image original as poster_image %}
                        "posterFrameURL":"{{ poster_image.url|escapejs }}",
                    {% endif %}
                    "uiPosterFrameFillMode":"fill",
                    "uiQuickRewindSeconds":"30"
                    }
                );
            </script>

            <div itemscope itemtype="https://schema.org/VideoObject">
                <meta itemprop="uploadDate" content="2018-06-28T15:18:21+0100" />
                <meta itemprop="name" content="{{ self.title|escapejs }}" />
                <meta itemprop="duration" content="P0D" />
                <meta itemprop="contentUrl" content="https://wowzaprod192-i.akamaihd.net/hls/live/766214/bc46a873/playlist.m3u8" />
                <script src="https://cdn.jwplayer.com/players/fa9beBFu-tM4QASU8.js"></script>
            </div>
        {% endif %}
    </section>

    <section class="row">
        {% include "rca/includes/modules/body-text.html" with showIntro="true" body=self.body %}

        <section class="four">
            <div class="single borders">
                {% include "rca/includes/modules/share-button.html" %}
            </div>
        </section>
    </section>
    {% include "rca/includes/modules/twitter-feed.html" %}
{% endblock %}

{% block sidebar %}
    {% include "rca/includes/sidebar.html" with showToday="true" showRelatedLinks="true" showAdverts="true" %}
{% endblock %}
